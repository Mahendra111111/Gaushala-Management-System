(()=>{var e={};e.id=205,e.ids=[205],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},25749:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>f,routeModule:()=>d,serverHooks:()=>x,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var t={};s.r(t),s.d(t,{POST:()=>p,dynamic:()=>c});var a=s(96559),o=s(48088),i=s(37719),n=s(39398),u=s(32190);let c="force-dynamic";async function p(){try{let e=process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR4a3Z3enVhdHRzbHF1cWl1bmNxIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2ODgxOTYxMSwiZXhwIjoyMDg0Mzk1NjExfQ.Is4oNhJN84YtOTxBVUGx96r1iRM7E35TZHTPxUaktKc";if(!e)return u.NextResponse.json({success:!1,error:"Service role key not configured. Please set SUPABASE_SERVICE_ROLE_KEY in environment variables."},{status:500});let r=(0,n.createClient)("https://dxkvwzuattslquqiuncq.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}}),s="admin@gaushala.com",t="admin@123",{data:a,error:o}=await r.auth.admin.listUsers();if(o)return console.error("Error listing users:",o),u.NextResponse.json({success:!1,error:o.message},{status:500});let i=a?.users?.find(e=>e.email===s);if(i){let{data:e,error:s}=await r.auth.admin.updateUserById(i.id,{password:t,email_confirm:!0});if(s)return console.error("Error updating user password:",s),u.NextResponse.json({success:!1,error:s.message},{status:500});return u.NextResponse.json({success:!0,message:"Admin password updated successfully",user:e.user?.email})}{let{data:e,error:a}=await r.auth.admin.createUser({email:s,password:t,email_confirm:!0,user_metadata:{full_name:"Admin User"}});if(a)return console.error("Error creating user:",a),u.NextResponse.json({success:!1,error:a.message},{status:500});return await r.from("profiles").upsert({id:e.user.id,email:s,full_name:"Admin User",role:"admin",updated_at:new Date().toISOString()},{onConflict:"id"}),u.NextResponse.json({success:!0,message:"Admin user created successfully",user:e.user?.email})}}catch(r){console.error("Error in reset-admin-password:",r);let e=r instanceof Error?r.message:"Unknown error";return u.NextResponse.json({success:!1,error:e},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/reset-admin-password/route",pathname:"/api/reset-admin-password",filename:"route",bundlePath:"app/api/reset-admin-password/route"},resolvedPagePath:"C:\\Users\\owner\\Downloads\\gaushala_project-main V6\\gaushala_project-main\\gaushala_project-main\\src\\app\\api\\reset-admin-password\\route.ts",nextConfigOutput:"standalone",userland:t}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:x}=d;function f(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47990:()=>{},51906:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=51906,e.exports=r},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,398,580],()=>s(25749));module.exports=t})();